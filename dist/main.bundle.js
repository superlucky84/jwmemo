!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)a=s[p],o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;return i.push([239,1]),n()}({239:function(e,t,n){n(240),e.exports=n(545)},545:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return P});var o=n(0),i=n.n(o),a=n(24),s=n.n(a),c=n(104),u=n(20),l=n(3),p=n(156);function f(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var y=function(e){return e?Object.keys(e).filter(function(t){return""!==e[t]&&null!==e[t]}).reduce(function(t,n,r){var o=0===r?"":"&",i=e[n];return Array.isArray(i)?i.forEach(function(e){t+="".concat(o).concat(n,"[]=").concat(e)}):t+="".concat(o).concat(n,"=").concat(i),t},""):{}},h=function(e,t,n,r){return new Promise(function(o,i){var a=new XMLHttpRequest;"withCredentials"in a?(a.onreadystatechange=function(){4===a.readyState&&(200===a.status&&o?o(a.response):i("xhr error"))},a.open(e,t,!1),a.withCredentials=!0,r&&a.setRequestHeader("Content-Type",r)):"undefined"!=typeof XDomainRequest?((a=new XDomainRequest).onprogress=function(){},a.ontimeout=function(){},a.open(e,t)):a=null,a.send(JSON.stringify(n))})};function d(e){return v.apply(this,arguments)}function v(){var e;return e=regeneratorRuntime.mark(function e(t){var n,r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,o=t.data,t.success,t.fail,t.options||{},i=t.contentType,"POST"!==r&&o&&(n+="?".concat(y(o))),e.next=10,h(r,n,o,i);case 10:return a=e.sent,e.abrupt("return",JSON.parse(a));case 12:case"end":return e.stop()}},e,this)}),(v=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,s,"next",e)}function s(e){f(i,r,o,a,s,"throw",e)}a(void 0)})}).apply(this,arguments)}function m(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,s,"next",e)}function s(e){m(i,r,o,a,s,"throw",e)}a(void 0)})}}var w=null,g=null;function O(e,t){return E.apply(this,arguments)}function E(){return(E=b(regeneratorRuntime.mark(function e(t,n){var r,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:"GET",o={method:r,url:t,data:n},"POST"===r&&(o.contentType="application/json; charset=UTF-8"),e.next=5,d(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=b(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,c,u,l,p,f,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("GETLIST"!==t.type){e.next=8;break}return n=t.searchString,e.next=4,O("/jnote/read",n?{searchString:n}:null);case 4:r=e.sent,t.list=r,e.next=50;break;case 8:if("GETONE"!==t.type){e.next=15;break}return e.next=11,O("/jnote/read/".concat(t.id),{});case 11:o=e.sent,t.info=o,e.next=50;break;case 15:if("TOGGLE_FAVORITE"!==t.type){e.next=23;break}return i=!g.getState().default.lists[t.idx].favorite,e.next=19,O("/jnote/update",{id:t.id,favorite:i},"POST");case 19:e.sent,t.favorite=i,e.next=50;break;case 23:if("WRITENOTE"!==t.type){e.next=30;break}return a=g.getState().default.write,e.next=27,O("/jnote/create",{title:a.title,note:a.note,category:a.tags},"POST");case 27:t.data=e.sent,e.next=50;break;case 30:if("DELETENOTE"!==t.type){e.next=40;break}return s=g.getState().default.lists,c=g.getState().default.view.noteId,e.next=35,O("/jnote/delete",{id:c},"POST");case 35:u=null,s.some(function(e,t){return e._id===c&&(u=t),e._id===c}),t.idx=u,e.next=50;break;case 40:if("EDITNOTE"!==t.type){e.next=50;break}return l=g.getState().default.lists,p=g.getState().default.write,e.next=45,O("/jnote/update",{id:p.noteId,title:p.title,note:p.note,category:p.tags},"POST");case 45:f=e.sent,y=null,l.some(function(e,t){return e._id===f._id&&(y=t),e._id===f._id}),t.idx=y,t.data=f;case 50:w(t);case 51:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var j={search:{tags:[]},lists:[],view:{noteId:0,title:"",note:"",tags:[]},write:{noteId:0,title:"",note:"",scroll:0,tags:[]},preview:{opened:!1},dialog:{opened:!1,type:"alert",message:""},shortcut:{buffer:null,admin:!1}};function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case"SCROLL_CHANGE":return(n=JSON.parse(JSON.stringify(e))).write.scroll=t.scroll,n;case"ADMIN_CHANGE":return(n=Object.assign({},e)).shortcut.admin=t.bool,n;case"SHORTCUT_CHANGE":return n=Object.assign({},e,{shortcut:Object.assign({},e.shortcut,{buffer:t.command})});case"OPEN_DIALOG":return n=Object.assign({},e,{dialog:{opened:!0,type:t.dialogtype,message:t.message,successaction:t.successaction,failAction:t.failaction}});case"CLOSE_DIALOG":return n=Object.assign({},e,{dialog:{opened:!1,type:""}});case"TOGGLE_FAVORITE":return(n=JSON.parse(JSON.stringify(e))).lists[t.idx].favorite=t.favorite,n;case"TOGGLE_PREVIEW":var r=!e.preview.opened;return(n=Object.assign({},e)).preview.opened=r,n;case"WRITENOTE":var o=[t.data].concat(e.lists);return n=Object.assign({},e,{lists:o,write:{title:"",note:"",tags:[]}});case"EDITNOTE":return(n=Object.assign({},e)).lists[t.idx]=t.data,n;case"UPDATEFORM_SYNC":return n=Object.assign({},e,{write:{noteId:e.view.noteId,title:e.view.title,note:e.view.note,tags:e.view.tags}});case"UPDATEFORM_TITLE":return(n=Object.assign({},e)).write.title=t.text,n;case"UPDATEFORM_NOTE":return(n=Object.assign({},e)).write.note=t.text,n;case"UPDATEFORM_TAGS":return(n=Object.assign({},e)).write.tags=t.text,n;case"DELETENOTE":return(n=Object.assign({},e)).lists.splice(t.idx,1),e.lists=k(n.lists),e;case"GETONE":return Object.assign({},e,{view:{note:t.info.note,title:t.info.title,tags:t.info.category,noteId:t.id}});case"GETLIST":n=JSON.parse(JSON.stringify(e));return t.searchString&&t.searchString,n=Object.assign({},e,{lists:t.list});default:return e}}function x(e){return{type:"SCROLL_CHANGE",scroll:e}}function C(e){return{type:"SHORTCUT_CHANGE",command:e}}function N(e){return{type:"ADMIN_CHANGE",bool:e}}function M(e,t){return{type:"OPEN_DIALOG",dialogtype:e,message:t,successaction:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,failaction:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}}function L(e){return{type:"EDITNOTE",id:e,idx:null,data:null}}function R(){return{type:"DELETENOTE",idx:null}}function _(e){return{type:"GETLIST",searchString:e,list:[]}}function I(e){return{type:"GETONE",id:e,info:{}}}function D(e,t){return{type:"UPDATEFORM_"+e.toUpperCase(),text:t}}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,q(t).call(this,e))).noteId=null,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,o["Component"]),n=t,(r=[{key:"handleChangeWritepage",value:function(){S(D("title","")),S(D("note","")),l.hashHistory.push("/write"),this.props.preview||S({type:"TOGGLE_PREVIEW"})}},{key:"handleEditMemo",value:function(){S(D("sync")),l.hashHistory.push("/write/"+this.noteId),this.props.preview||S({type:"TOGGLE_PREVIEW"})}},{key:"handleWriteCancel",value:function(){this.props.preview&&S({type:"TOGGLE_PREVIEW"}),this.noteId?l.hashHistory.push("/view/"+this.noteId):l.hashHistory.push("/")}},{key:"handleWriteMemo",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.adminMode){e.next=3;break}return S(M("alert","You have no authority.")),e.abrupt("return");case 3:if(!this.props.preview){e.next=7;break}return e.next=7,S({type:"TOGGLE_PREVIEW"});case 7:if(!this.noteId){e.next=13;break}return e.next=10,S(L(this.noteId));case 10:l.hashHistory.push("/view/"+this.noteId),e.next=14;break;case 13:S({type:"WRITENOTE",data:null});case 14:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){W(i,r,o,a,s,"next",e)}function s(e){W(i,r,o,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"handleDeleteMemo",value:function(){this.props.adminMode?(this.props.preview&&S({type:"TOGGLE_PREVIEW"}),S(M("confirm","Really?",{action:"deleteNote",push:"/"}))):S(M("alert","You have no authority."))}},{key:"handleShowPreview",value:function(){S({type:"TOGGLE_PREVIEW"})}},{key:"handleOpenDailog",value:function(){S(M("confirm","test"))}},{key:"handleLogin",value:function(){S(M("login","login")),S(M("login","password",{action:"adminChange"}))}},{key:"handleLogout",value:function(){S(N(!1))}},{key:"render",value:function(){var e=[],t="";switch(this.viewType=this.props.location.pathname.replace(/\/([^\/]*)[\w\/]*/,"$1"),this.noteId=this.props.location.pathname.replace(/\/([^\/]*)\/?(([\w\/]*))?/,"$2"),this.viewType){case"view":t=this.props.viewTitle,e.push(i.a.createElement("button",{key:"edit",onClick:this.handleEditMemo.bind(this)},"EDIT")),e.push(i.a.createElement("button",{key:"delete",onClick:this.handleDeleteMemo.bind(this)},"DELETE"));case"":e.unshift(i.a.createElement("button",{key:"write",onClick:this.handleChangeWritepage.bind(this)},"WRITE"));break;case"write":t="write";var n="PREVIEW";this.props.preview&&(n="LIST"),e.push(i.a.createElement("button",{key:n,onClick:this.handleShowPreview.bind(this)},n)),e.push(i.a.createElement("button",{key:"send",onClick:this.handleWriteMemo.bind(this)},"SAVE")),e.push(i.a.createElement("button",{key:"cancel",onClick:this.handleWriteCancel.bind(this)},"CANCEL"))}return this.props.adminMode?e.push(i.a.createElement("button",{key:"logout",onClick:this.handleLogout.bind(this)},"LOGOUT")):e.push(i.a.createElement("button",{key:"login",onClick:this.handleLogin.bind(this)},"LOGIN")),i.a.createElement("header",null,i.a.createElement("div",{className:"left"},this.props.viewTitle?" - "+t+" - ":"JINW-MEMO"),i.a.createElement("div",{className:"right"},e))}}])&&A(n.prototype,r),a&&A(n,a),t}(),J=Object(u.connect)(function(e){return{viewTitle:e.default.view.title}})(U);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=F(this,Y(t).call(this,e))).timeoutState=null,n.preKeyCode=null,document.querySelector("body").addEventListener("keydown",function(e){var t=e.keyCode||e.charCode;1==e.shiftKey&&(186==t||59==t||191==t)&&"normal"==CodeMirror.Vim.jwmode&&["TEXTAREA"].indexOf(e.target.tagName)>-1&&(e.target.blur(),setTimeout(function(){e.target.focus()},900)),27==t&&["INPUT"].indexOf(e.target.tagName)>-1&&e.target.blur()}),document.querySelector("body").addEventListener("keypress",function(e){var t=e.keyCode||e.charCode;if(!(["TEXTAREA","INPUT"].indexOf(e.target.tagName)>-1)){e.preventDefault();var r=n.props.shortcutBuffer;null==n.props.shortcutBuffer&&(r="");var o=String(r+String.fromCharCode(t));S(C(o));var i=null;if(i=/([0-9]*)gg$/g.exec(o)){var a=i[1];""==a&&(a=0),n.viewTargetTrigger(a)}else if(13==t&&/^:([0-9]+)\s/g.exec(o))i=/^:([0-9]+)\s/g.exec(o),n.viewTargetTrigger(i[1]);else if(13==t&&/^[:](s|search|list)\s/g.exec(o))S(M("search","searchList",{action:"getList",push:"/"}));else if(13==t&&o.match(/:e[ ]?([0-9]*)\s/g)){i=/:e[ ]?([0-9]*)/g.exec(o);var s=document.querySelector(".list li[data-idx='".concat(i[1],"']"));""==i[1]?(S(D("sync")),l.hashHistory.push("/write/"+n.props.params.id),document.querySelector("textarea").focus(),n.props.preview||S({type:"TOGGLE_PREVIEW"})):s?(s.click(),S(D("sync")),l.hashHistory.push("/write/"+n.props.params.id),document.querySelector("textarea").focus(),n.props.preview||S({type:"TOGGLE_PREVIEW"})):S(M("alert","Not Found Idx"))}else if(13==t&&o.match(/^\/(.*)\s/g))S(_((i=/^\/(.*)\s/g.exec(o))[1]));else if(13==t&&o.match(/^:q\s/g)){n.props.preview&&S({type:"TOGGLE_PREVIEW"});var c=n.props.location.pathname.replace(/\/([^\/]*)\/?(([\w\/]*))?/,"$2");c?l.hashHistory.push("/view/"+c):l.hashHistory.push("/")}else if(13==t&&o.match(/^:w(q?)\s/g)){i=/^:w(q?)\s/g.exec(o);var u=n.props.location.pathname.replace(/\/([^\/]*)\/?(([\w\/]*))?/,"$2");"write"==n.props.location.pathname.replace(/\/([^\/]*)[\w\/]*/,"$1")&&(n.props.adminMode?u?(S(L(u)),"q"==i[1]&&(n.props.preview&&S({type:"TOGGLE_PREVIEW"}),l.hashHistory.push("/view/"+u))):(S({type:"WRITENOTE",data:null}),setTimeout(function(){n.props.preview&&S({type:"TOGGLE_PREVIEW"}),n.viewTargetTrigger(0),"q"!=i[1]&&(S(D("sync")),l.hashHistory.push("/write/"+n.props.params.id),document.querySelector("textarea").focus(),S({type:"TOGGLE_PREVIEW"}))},1e3)):S(M("alert","You have no authority.")))}else if(o.match(/=/g))n.props.changeShadowLeft(50);else if(i=/([0-9]+)([<>])$/g.exec(o)){var p=n.props.realleft;">"==i[2]?p=n.props.realleft+parseInt(i[1]):"<"==i[2]&&(p=n.props.realleft-parseInt(i[1])),p<=0?p=1:p>=100&&(p=99),n.props.changeShadowLeft(p)}clearTimeout(n.timeoutState),n.timeoutState=setTimeout(function(){var e;(e=/([0-9]+)$/g.exec(o))&&n.props.changeShadowLeft(parseInt(e[1])),S(C("")),n.timeoutState=null},900)}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,o["Component"]),n=t,(r=[{key:"viewTargetTrigger",value:function(e){var t=document.querySelector(".list li[data-idx='".concat(e,"']"));t?t.click():S(M("alert","Not Found Idx"))}},{key:"render",value:function(){var e=String(this.props.shortcutBuffer).replace(//g,"^W"),t=/(.*)\?(.*)/g.exec(e);return t&&(e="".concat(t[1],"?").concat(t[2].replace(/./g,"*"))),i.a.createElement("footer",null,this.props.shortcutBuffer?i.a.createElement("div",{id:"command-display",className:"left"},e):null,i.a.createElement("div",{className:"right"},"©2016 SUPERLUCKY inc"))}}])&&X(n.prototype,r),a&&X(n,a),t}(),K=Object(u.connect)(function(e){return{shortcutBuffer:e.default.shortcut.buffer}})(z);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"handleChoickList",value:function(e){l.hashHistory.push("/view/"+e)}},{key:"render",value:function(){return i.a.createElement("span",{className:"tag"},this.props.tag.toUpperCase())}}])&&Z(n.prototype,r),a&&Z(n,a),t}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,se(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"handleChoickList",value:function(e){l.hashHistory.push("/view/"+e)}},{key:"handleChangeFav",value:function(e,t,n){this.props.adminMode?S(function(e,t){return{type:"TOGGLE_FAVORITE",id:e,idx:t}}(e,t)):S(M("alert","Only admin mode.")),n.stopPropagation()}},{key:"render",value:function(){var e=[];return this.props.tags&&(e=this.props.tags.reduce(function(e,t){var n=e;return t&&n.push(t),n},[])),i.a.createElement("li",{"data-idx":this.props.idx,className:this.props.favorite?"fav":"",onClick:this.handleChoickList.bind(this,this.props.id)},i.a.createElement("div",null,e.map(function(e,t){return i.a.createElement(re,{key:t,tag:e})})),i.a.createElement("div",{className:"title"},this.props.idx,". ",this.props.title,i.a.createElement("span",{onClick:this.handleChangeFav.bind(this,this.props.id,this.props.idx)})))}}])&&ie(n.prototype,r),a&&ie(n,a),t}();function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addClass",value:function(e,t){var n=e.className;new RegExp(t,"g").exec(n)||(n+=" "+t,e.className=n)}},{key:"removeClass",value:function(e,t){var n=e.className;if(new RegExp(t,"g").exec(n)){var r=new RegExp(" "+t,"g");n=n.replace(r,""),e.className=n}}}])&&le(t.prototype,n),r&&le(t,r),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=he(this,de(t).call(this,e))).scrollWrap=null,n.scrollInner=null,n.ps=null,n.sc=null,n.rating=0,n.op=n.props.option?n.props.option:{},n.scrollDragStandard=[],n.drag=!1,n.scrollTime=null,n.util=new pe,n.isWebkit="WebkitAppearance"in document.documentElement.style,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollWrap=s.a.findDOMNode(this),this.scrollInner=this.scrollWrap.querySelector(".jwscroll-inner"),!0!==this.isWebkit&&this.hiddenScroll(),this.addScroll(),this.makeScrollPosition(),this.setScrollTop(),this.initEvent()}},{key:"componentWillReceiveProps",value:function(e){if(e.realleft!=this.props.realleft&&!0!==this.isWebkit){var t=this.scrollWrap;this.scrollInner.removeAttribute("style"),t.removeAttribute("style"),this.hiddenScroll()}if(this.props.viewType&&"preview"==this.props.viewType&&(e.previewScroll!=this.props.previewScroll||100==e.previewScroll)){var n=s.a.findDOMNode(this).querySelector(".jwscroll-inner"),r=(n.scrollHeight-n.clientHeight)*e.previewScroll/100;n.scrollTop=Number(r)}}},{key:"hiddenScroll",value:function(){var e=this.scrollWrap,t=this.scrollInner,n=t.offsetWidth-t.clientWidth,r=e.offsetWidth+n;t.style.width=r+"px",e.style.width=r-n+"px"}},{key:"addScroll",value:function(){var e=this.scrollWrap;this.sc=document.createElement("div"),this.ps=document.createElement("div"),this.ps.className="ps",this.sc.className="sc",this.sc.appendChild(this.ps),e.appendChild(this.sc)}},{key:"makeScrollPosition",value:function(){var e=s.a.findDOMNode(this.scrollInner),t=this.ps,n=e.scrollHeight,r=e.clientHeight,o=parseInt(r*(r/n));t.style.height=o+"px",!0===this.op.scrollShowAlways&&(t.style.opacity=1)}},{key:"setScrollTop",value:function(){var e=this.scrollInner,t=this.ps,n=e.scrollHeight,r=e.clientHeight;this.rating=r/n;var o=e.scrollTop*this.rating;t.style.top=o+"px"}},{key:"scrollShy",value:function(){var e=this,t=this.ps;e.util.addClass(t,"show"),clearTimeout(this.scrollTime),e.scrollTime=setTimeout(function(){e.util.removeClass(t,"show")},1e3)}},{key:"initEvent",value:function(){var e=this;document.addEventListener("mousemove",function(t){if(e.drag){var n=(t.screenY-e.scrollDragStandard[0])/e.rating,r=e.scrollDragStandard[1]+n;e.scrollInner.scrollTop=r}}),e.ps.addEventListener("mousedown",function(t){e.scrollDragStandard[0]=t.screenY,e.scrollDragStandard[1]=e.scrollInner.scrollTop,e.drag=!0}),e.ps.addEventListener("mouseup",function(){e.drag=!1}),document.addEventListener("mouseup",function(){e.drag=!1}),e.scrollInner.addEventListener("mouseenter",function(){e.scrollInner.scrollHeight!=e.scrollInner.clientHeight&&e.scrollShy()}),e.sc.addEventListener("mouseenter",function(){e.util.addClass(e.ps,"show")}),e.sc.addEventListener("mouseleave",function(){e.util.removeClass(e.ps,"show")}),e.scrollInner.addEventListener("scroll",function(){e.setScrollTop(),e.scrollShy()}),e.scrollInner.addEventListener("DOMSubtreeModified",function(){setTimeout(function(){e.makeScrollPosition(),e.setScrollTop()},30)}),window.addEventListener("resize",function(){if(!0!==e.isWebkit){var t=e.scrollWrap;e.scrollInner.removeAttribute("style"),t.removeAttribute("style"),e.hiddenScroll()}e.makeScrollPosition(),e.setScrollTop()})}},{key:"render",value:function(){return i.a.createElement("div",{className:"jwscroll"},i.a.createElement("div",{className:"jwscroll-inner"},this.props.children))}}])&&ye(n.prototype,r),a&&ye(n,a),t}(),be=Object(u.connect)(function(e){return{previewScroll:e.default.write.scroll}})(me);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,Ee(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"handleChoickList",value:function(e){l.hashHistory.push("/view/"+e)}},{key:"render",value:function(){var e=this,t=null;if(this.props.realleft){var n=100-this.props.realleft;t={right:"calc(".concat(n,"% + 5px)")}}return i.a.createElement("div",{className:"list",style:t},i.a.createElement(be,{realleft:this.props.realleft},i.a.createElement("ul",null,this.props.lists.map(function(t,n){return i.a.createElement(ue,{key:n,idx:n,id:t._id,title:t.title,favorite:t.favorite,tags:t.category,adminMode:e.props.adminMode})}))))}}])&&ge(n.prototype,r),a&&ge(n,a),t}(),ke=n(82),je=n.n(ke);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,Ne(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){this.props.routeParams&&this.props.routeParams.id&&S(I(this.props.routeParams.id))}},{key:"componentWillReceiveProps",value:function(e){e.routeParams&&e.routeParams.id!=this.props.params.id&&S(I(e.routeParams.id))}},{key:"render",value:function(){je.a.setOptions({renderer:new je.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1});var e="";return e="preview"==this.props.viewType?je()(this.props.previewNote.toString(),{sanitize:!1}):je()(this.props.note.toString(),{sanitize:!1}),i.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:e}})}}])&&xe(n.prototype,r),a&&xe(n,a),t}(),Re=Object(u.connect)(function(e){return{note:e.default.view.note,previewNote:e.default.write.note}})(Le);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,Ge(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=null,t="";if("preview"==this.props.viewType){if(this.props.realleft){var n=100-this.props.realleft;e={right:"calc(".concat(n,"% + 5px)")},t="preview"}}else this.props.realleft&&(e={left:"calc("+this.props.realleft+"% + 7px)"},t="view");return i.a.createElement("div",{style:e,className:t},i.a.createElement(be,{viewType:this.props.viewType,realleft:this.props.realleft},i.a.createElement(Re,this.props)))}}])&&Ie(n.prototype,r),a&&Ie(n,a),t}();function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,Je(t).call(this,e))).deleteNote=R,n.getList=_,n.adminChange=N,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,o["Component"]),n=t,(r=[{key:"handleDialogClose",value:function(){S({type:"CLOSE_DIALOG"})}},{key:"handleDialogSuccess",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.dialog.successaction.action,n=this.props.dialog.successaction.push,r="",!(["search","confirm"].indexOf(this.props.dialog.type)>-1)){e.next=10;break}return document.querySelector(".message input")&&(r=document.querySelector(".message input").value),e.next=7,S(this[t](r));case 7:l.hashHistory.push(n),e.next=11;break;case 10:"login"==this.props.dialog.type&&(r=document.querySelector(".message input").value).match(/^dufma$/)&&S(this[t](!0));case 11:this.handleDialogClose();case 12:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qe(i,r,o,a,s,"next",e)}function s(e){qe(i,r,o,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"handleInputAction",value:function(e){27==e.keyCode?this.handleDialogClose():13==e.keyCode&&this.handleDialogSuccess()}},{key:"componentDidMount",value:function(){document.querySelector(".message input")?document.querySelector(".message input").focus():document.querySelector(".cancel").focus()}},{key:"render",value:function(){var e=null;return"search"==this.props.dialog.type?e=i.a.createElement("input",{type:"text",onKeyDown:this.handleInputAction.bind(this),id:"searchString"}):"login"==this.props.dialog.type&&(e=i.a.createElement("input",{type:"password",onKeyDown:this.handleInputAction.bind(this),id:"searchString"})),i.a.createElement("div",{id:"dialog"},i.a.createElement("div",{className:"dialog-shadow"}),i.a.createElement("div",{className:"dialog-box"},i.a.createElement("div",{className:"message"},i.a.createElement("p",null,this.props.dialog.message,i.a.createElement("br",null),e)),i.a.createElement("div",{className:"button"},["confirm","search","login"].indexOf(this.props.dialog.type)>-1?i.a.createElement("button",{onClick:this.handleDialogSuccess.bind(this)},"Ok."):null,i.a.createElement("button",{className:"cancel",onClick:this.handleDialogClose.bind(this)},"Cancel."))))}}])&&Ve(n.prototype,r),a&&Ve(n,a),t}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Be(this,ze(t).call(this,e))).state={downstate:!1,realleft:30},r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){S(_())}},{key:"handleMouseDown",value:function(){this.setState({downstate:!0})}},{key:"handleMouseUp",value:function(e){if(this.state.downstate){var t=e.pageX;if(!t&&e.touches){if(0==e.touches.length)return;t=e.touches[0].pageX}var n=document.getElementById("container").clientWidth,r=Math.round(t/n*100);this.changeShadowLeft(r)}}},{key:"handleMouseLeave",value:function(){this.setState({downstate:!1})}},{key:"handleMouseMove",value:function(e){if(this.state.downstate){var t=e.pageX||e.touches[0].pageX;this.setState({shadowleft:{left:"calc(".concat(t-5,"px)")}})}}},{key:"changeShadowLeft",value:function(e){this.setState({downstate:!1,realleft:e})}},{key:"render",value:function(){var e=this.state.realleft,t={left:"calc(".concat(e,"% - 3px)")},n=null;this.state.downstate&&(n=i.a.createElement("div",{className:"split-shadow",style:this.state.shadowleft}));var r=i.a.cloneElement(this.props.children,{realleft:e}),o=null;return this.props.dialog.opened&&(o=i.a.createElement(Xe,this.props)),i.a.createElement("div",{id:"app-container"},i.a.createElement(J,{location:this.props.location,preview:this.props.preview,adminMode:this.props.adminMode}),i.a.createElement("div",{id:"container",onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onTouchMove:this.handleMouseMove.bind(this)},o,this.props.preview?i.a.createElement(Ae,{viewType:"preview",realleft:this.state.realleft}):i.a.createElement(Te,{lists:this.props.lists,adminMode:this.props.adminMode,realleft:this.state.realleft}),i.a.createElement("div",{onMouseDown:this.handleMouseDown.bind(this),onTouchStart:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseUp.bind(this),className:"split",style:t}),n,r),i.a.createElement(K,{location:this.props.location,params:this.props.params,preview:this.props.preview,adminMode:this.props.adminMode,changeShadowLeft:this.changeShadowLeft.bind(this),realleft:this.state.realleft}))}}])&&Ye(n.prototype,r),a&&Ye(n,a),t}(),Ze=Object(u.connect)(function(e){return{lists:e.default.lists,preview:e.default.preview.opened,dialog:e.default.dialog,adminMode:e.default.shortcut.admin}})(Qe);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,rt(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=null;return this.props.realleft&&(e={left:"calc("+this.props.realleft+"% + 7px)"}),i.a.createElement("div",{className:"view",style:e},i.a.createElement(be,null,i.a.createElement("div",{className:"markdown-body"},"EMPTY")))}}])&&tt(n.prototype,r),a&&tt(n,a),t}();function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ct(this,ut(t).call(this,e))).scrollPercent=0,n.editor=null,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){if(this.props.writeNote||this.editor.setValue(e.writeNote),e.writeScroll!=this.props.writeScroll){var t=s.a.findDOMNode(this.refs.textarea),n=(t.scrollHeight-t.clientHeight)*e.writeScroll/100;t.scrollTop=n}}},{key:"componentDidUpdate",value:function(e){}},{key:"changeTitle",value:function(e){S(D("title",e.target.value))}},{key:"changeNote",value:function(){var e=s.a.findDOMNode(this.refs.textarea),t=!1;this.props.writeNote.slice(-2)!=e.value.slice(-2)&&(t=!0),S(D("note",e.value)),t&&S(x(100))}},{key:"changeScroll",value:function(e){var t=e.scrollTop/(e.scrollHeight-e.clientHeight)*100;t=Math.round(t),this.scrollPercent=t,S(x(t))}},{key:"changeTag",value:function(e){var t=e.target.value.replace(/[^a-z0-9,;:]*/g,"").replace(/[,;:]/g,",").replace(/,+/g,",").replace(/^,/g,""),n=t.split(",");if(t.match(/,$/)){var r=[];n.forEach(function(e){-1==r.indexOf(e)&&r.push(e)}),n=r}S(D("tags",n))}},{key:"componentDidMount",value:function(){var e=this;this.props.routeParams.id&&(S(I(this.props.routeParams.id)),S(D("sync")));var t=s.a.findDOMNode(this.refs.textarea);CodeMirror.Vim.jwmode="normal",this.editor=CodeMirror.fromTextArea(t,{lineNumbers:!0,keyMap:"vim",lineWrapping:!0}),CodeMirror.on(this.editor,"vim-command-done",function(t){setTimeout(function(){e.editor.save(),e.changeNote()})}),CodeMirror.on(this.editor,"vim-mode-change",function(e){CodeMirror.Vim.jwmode=e.mode}),CodeMirror.on(this.editor,"scroll",function(t){e.changeScroll(t.display.scrollbars.vert)}),this.editor.display.lineDiv.addEventListener("dragenter",this.dragEnter.bind(this)),this.editor.display.lineDiv.addEventListener("dragover",this.dragEnter.bind(this)),this.editor.display.lineDiv.addEventListener("drop",this.onDrop.bind(this)),this.editor.focus()}},{key:"dragEnter",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){var t=this,n=this.refs.textarea,r=e.dataTransfer.files[0],o=new FormData,i=new XMLHttpRequest;o.append("pict",r),i.open("POST","/jnote/upload"),i.send(o),i.onreadystatechange=function(){if(4==i.readyState&&i.status>=200&&i.status<300){var e=JSON.parse(i.responseText),r="\n![]("+String(e.filepath)+")\n";n.value=n.value+r,t.editor.setValue(n.value),t.editor.save(),t.changeNote()}},e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e=this.props.writeTags.join(", ").replace(/[ ]*$/,""),t=null;return this.props.realleft&&(t={left:"calc("+this.props.realleft+"% + 7px)"}),i.a.createElement("div",{className:"write",style:t},i.a.createElement("input",{type:"text",placeholder:"Title",onChange:this.changeTitle.bind(this),value:this.props.writeTitle}),i.a.createElement("input",{type:"text",placeholder:"Tag",onChange:this.changeTag.bind(this),value:e}),i.a.createElement("textarea",{ref:"textarea",placeholder:"Memo",onChange:this.changeNote.bind(this),value:this.props.writeNote}))}}])&&st(n.prototype,r),a&&st(n,a),t}(),ft=Object(u.connect)(function(e){return{writeTitle:e.default.write.title,writeNote:e.default.write.note,writeTags:e.default.write.tags,writeScroll:e.default.write.scroll}})(pt);function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ht=Object(c.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yt(e,t,n[t])})}return e}({},r,{routing:p.routerReducer})),dt=Object(c.createStore)(ht);!function(e){w=e.dispatch,g=e}(dt);var vt=Object(p.syncHistoryWithStore)(l.hashHistory,dt);s.a.render(i.a.createElement(u.Provider,{store:dt},i.a.createElement(l.Router,{history:vt},i.a.createElement(l.Route,{path:"/",component:Ze},i.a.createElement(l.IndexRoute,{component:it}),i.a.createElement(l.Route,{path:"view/:id",component:Ae}),i.a.createElement(l.Route,{path:"write",component:ft}),i.a.createElement(l.Route,{path:"write/:id",component:ft})))),document.getElementById("jnote"))}})});